2025-08-04 10:08:06,845 - Main - INFO - [logger.py:58] - ✅ 配置验证通过
2025-08-04 10:08:06,845 - Main - INFO - [logger.py:58] - 📋 使用配置: type
2025-08-04 10:08:06,845 - Main - INFO - [logger.py:58] - 🚀 CareerNavigator后端启动中...
2025-08-04 10:08:06,845 - Main - INFO - [logger.py:58] - 📊 调试模式: True
2025-08-04 10:08:06,845 - Main - INFO - [logger.py:58] - 📝 日志级别: DEBUG
2025-08-04 10:08:06,845 - Main - INFO - [logger.py:58] - 📁 静态文件夹: H:\projects\coach\frontend
2025-08-04 10:08:06,845 - Main - INFO - [logger.py:58] - 🌐 CORS配置: ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5173']
2025-08-04 10:08:06,851 - Main - INFO - [logger.py:58] - 📚 API蓝图注册完成
2025-08-04 10:08:06,851 - Main - INFO - [logger.py:58] - � 无数据库模式，跳过数据库初始化
2025-08-04 14:21:48,998 - Main - ERROR - [logger.py:68] - 工作流执行错误: 'iteration_count'
Traceback (most recent call last):
  File "H:\projects\coach\test_langgraph_backend.py", line 249, in run_workflow_step
    self.print_stage_info(current_state)
  File "H:\projects\coach\test_langgraph_backend.py", line 60, in print_stage_info
    stage_info = self.graph.get_current_stage_info(state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\projects\coach\src\services\career_graph.py", line 292, in get_current_stage_info
    "iteration_count": state["iteration_count"],
                       ~~~~~^^^^^^^^^^^^^^^^^^^
KeyError: 'iteration_count'
2025-08-04 14:23:24,069 - Main - ERROR - [logger.py:68] - 工作流执行错误: 'iteration_count'
Traceback (most recent call last):
  File "H:\projects\coach\test_langgraph_backend.py", line 249, in run_workflow_step
    self.print_stage_info(current_state)
  File "H:\projects\coach\test_langgraph_backend.py", line 60, in print_stage_info
    stage_info = self.graph.get_current_stage_info(state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\projects\coach\src\services\career_graph.py", line 292, in get_current_stage_info
    "iteration_count": state["iteration_count"],
                       ~~~~~^^^^^^^^^^^^^^^^^^^
KeyError: 'iteration_count'
2025-08-04 14:28:34,419 - Main - ERROR - [logger.py:68] - 工作流执行错误: 'user_feedback_history'
Traceback (most recent call last):
  File "H:\projects\coach\test_langgraph_backend.py", line 275, in run_workflow_step
    updated_state = self.wait_for_user_feedback(current_state)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\projects\coach\test_langgraph_backend.py", line 175, in wait_for_user_feedback
    updated_state = self.graph.update_user_feedback(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\projects\coach\src\services\career_graph.py", line 224, in update_user_feedback
    updated_state.update(StateUpdater.add_user_feedback(state, feedback))
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\projects\coach\src\models\career_state.py", line 255, in add_user_feedback
    updated_feedback = state["user_feedback_history"].copy()
                       ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'user_feedback_history'
2025-08-04 14:31:50,221 - Main - ERROR - [logger.py:68] - 工作流执行错误: 'messages'
Traceback (most recent call last):
  File "H:\projects\coach\test_langgraph_backend.py", line 259, in run_workflow_step
    for state_update in self.graph.app.stream(state):
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\pregel\main.py", line 2651, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\pregel\_runner.py", line 162, in tick
    run_with_retry(
  File "D:\conda\Lib\site-packages\langgraph\pregel\_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\_internal\_runnable.py", line 646, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\_internal\_runnable.py", line 390, in invoke
    ret = self.func(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\projects\coach\src\services\career_nodes.py", line 28, in coordinator_node
    messages = state["messages"]
               ~~~~~^^^^^^^^^^^^
KeyError: 'messages'
During task with name 'coordinator' and id '5ddd805c-0fcc-579d-d3a0-349c355e4360'
2025-08-04 15:19:02,616 - Main - ERROR - [logger.py:68] - 工作流执行错误: 'user_profile'
Traceback (most recent call last):
  File "H:\projects\coach\test_langgraph_backend.py", line 263, in run_workflow_step
    for state_update in self.graph.app.stream(state):
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\pregel\main.py", line 2651, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\pregel\_runner.py", line 162, in tick
    run_with_retry(
  File "D:\conda\Lib\site-packages\langgraph\pregel\_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\_internal\_runnable.py", line 646, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\_internal\_runnable.py", line 390, in invoke
    ret = self.func(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\projects\coach\src\services\career_nodes.py", line 34, in coordinator_node
    state["user_profile"]
    ~~~~~^^^^^^^^^^^^^^^^
KeyError: 'user_profile'
During task with name 'coordinator' and id '330a4f12-c9c0-c0f0-0343-1954247a5f51'
2025-08-04 16:15:07,292 - Main - ERROR - [logger.py:68] - 工作流执行错误: 'user_profile'
Traceback (most recent call last):
  File "H:\projects\coach\test_langgraph_backend.py", line 263, in run_workflow_step
    for state_update in self.graph.app.stream(state):
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\pregel\main.py", line 2651, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\pregel\_runner.py", line 162, in tick
    run_with_retry(
  File "D:\conda\Lib\site-packages\langgraph\pregel\_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\_internal\_runnable.py", line 646, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\_internal\_runnable.py", line 390, in invoke
    ret = self.func(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\projects\coach\src\services\career_nodes.py", line 34, in coordinator_node
    state["user_profile"]
    ~~~~~^^^^^^^^^^^^^^^^
KeyError: 'user_profile'
During task with name 'coordinator' and id '75a3e9c9-9823-b05a-6779-6f8e2fb3c1c8'
2025-08-04 17:42:39,833 - Main - ERROR - [logger.py:68] - 工作流执行错误: 'user_profile'
Traceback (most recent call last):
  File "H:\projects\coach\test_langgraph_backend.py", line 263, in run_workflow_step
    for state_update in self.graph.app.stream(state):
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\pregel\main.py", line 2651, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\pregel\_runner.py", line 162, in tick
    run_with_retry(
  File "D:\conda\Lib\site-packages\langgraph\pregel\_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\_internal\_runnable.py", line 646, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\conda\Lib\site-packages\langgraph\_internal\_runnable.py", line 390, in invoke
    ret = self.func(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "H:\projects\coach\src\services\career_nodes.py", line 34, in coordinator_node
    state["user_profile"]
    ~~~~~^^^^^^^^^^^^^^^^
KeyError: 'user_profile'
During task with name 'coordinator' and id '62124c33-7d7e-1f5a-541d-49ce2fe84426'
